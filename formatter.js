
const STRING = "WEBVTT\n\n1\n00:00:07.000 --> 00:00:09.100\nPessoal, tudo bem? Aqui\na gente vai a quantidade\n\n2\n00:00:09.100 --> 00:00:11.100\nno nosso apresentação da\ncriança c d e\n\n3\n00:00:11.100 --> 00:00:14.200\nagora começaram a entrar\nmais um detalhe do\n\n4\n00:00:14.200 --> 00:00:17.400\nfuncionamento, né? Dá para\ntentar ilustrar o que\n\n5\n00:00:17.400 --> 00:00:20.600\neu consegui falou e\no primeiro caso aqui,\n\n6\n00:00:20.600 --> 00:00:25.000\na gente vai mostrar\nmapa conceitual das estruturas\n\n7\n00:00:25.000 --> 00:00:27.600\nestruturas denominadas a b\nc d e e\n\n8\n00:00:27.600 --> 00:00:30.400\npara relacionar que o\nCD da escola e\n\n9\n00:00:30.400 --> 00:00:33.600\nsociedade da Penha SC\nde alto nível que\n\n10\n00:00:33.600 --> 00:00:37.100\na gente pode mostrar\nas ateísmo ouvidas que\n\n11\n00:00:37.100 --> 00:00:40.100\na gente tem que a\ngente já comentou\n\n12\n00:00:40.100 --> 00:00:42.900\nesse deu certo utilizou\npara enviar o arquivo\n\n13\n00:00:42.900 --> 00:00:48.900\ncentral. E aqui é o\nque é aqui\n\n14\n00:00:48.900 --> 00:00:50.700\ntem uma pequena legenda\naqui que a gente\n\n15\n00:00:50.700 --> 00:00:54.100\né só para só para\nfalar que a\n\n16\n00:00:54.100 --> 00:00:57.600\njá tem os azul\nclaro, né? São os\n\n17\n00:00:57.600 --> 00:00:59.900\nseis continentes\nensino.\n\n18\n00:00:59.900 --> 00:01:05.300\nComo por exemplo de\nato de carinho? Mas beleza\n\n19\n00:01:05.300 --> 00:01:09.100\nvamos lá então como\na gente comentou hoje\n\n20\n00:01:09.100 --> 00:01:14.000\nAPCD, ela responde geração\nda situação atual, né\n\n21\n00:01:14.000 --> 00:01:18.200\ndas contas de pagamento\nem geral que atende\n\n22\n00:01:18.200 --> 00:01:20.400\nao banco central. Como\nque ela faz isso,\n\n23\n00:01:20.400 --> 00:01:23.900\nela tem uma rotina\ntodos os dias que\n\n24\n00:01:23.900 --> 00:01:26.600\nas informações que recebeu\nao longo do dia\n\n25\n00:01:26.600 --> 00:01:30.900\npara poder gerar arquivo.\nEntão vamos dar um\n\n26\n00:01:30.900 --> 00:01:34.900\npasso a passo como\nsaber se hoje vai\n\n27\n00:01:34.900 --> 00:01:37.000\nchover em que é\nresponsável pela abertura e\n\n28\n00:01:37.000 --> 00:01:47.200\nfechamento de coco quase\ninformações necessárias que a\n\n29\n00:01:47.200 --> 00:01:50.700\ncriança diz que armazena\ne babás local no\n\n30\n00:01:50.700 --> 00:01:53.500\nbanco mongo, toda vez\ntoda fechada de conta\n\n31\n00:01:53.500 --> 00:01:57.000\ne a razão é isso aí\nnessa rotina.\n\n32\n00:01:57.000 --> 00:01:58.700\nQue que você faz.\n\n33\n00:01:59.100 --> 00:02:03.200\nEla pega todas as\nela tem um detalhe eu\n\n34\n00:02:03.200 --> 00:02:05.000\nnão pego sozinho informações\ndo dia ela pega\n\n35\n00:02:05.000 --> 00:02:08.000\ntodo histórico, porque quando\nagente de integração com\n\n36\n00:02:08.000 --> 00:02:09.900\na quando a gente\ntoma ela para mim\n\n37\n00:02:09.900 --> 00:02:13.500\ndeixam de se formar\ncoisas novas. É só\n\n38\n00:02:13.500 --> 00:02:17.700\natualização ou a gente\ntinha que informar toda\n\n39\n00:02:17.700 --> 00:02:20.000\na situação. Tá tudo\nhistória, então a gente\n\n40\n00:02:20.000 --> 00:02:22.000\noptou pelo histórico se\na gente fala tudo\n\n41\n00:02:22.000 --> 00:02:24.000\nna nossa vida todos\nos dias não só\n\n42\n00:02:24.000 --> 00:02:26.900\no tempo que vocês\nnão sabe aquele dia\n\n43\n00:02:26.900 --> 00:02:29.400\nentão a gente forma\ntodo o histórico todo\n\n44\n00:02:29.400 --> 00:02:32.700\ndias para gente ficou\nmais fácil assim. Então\n\n45\n00:02:32.700 --> 00:02:37.000\nassiste APCD pega as\ninformações daquele dia e\n\n46\n00:02:37.000 --> 00:02:41.000\nas respostas histórico complementa\nisso com informações confidenciais\n\n47\n00:02:41.000 --> 00:02:43.100\nque a gente não\nfazer você já queria\n\n48\n00:02:43.100 --> 00:02:46.900\nsaber a razão, mas o\ncofre armazena então\n\n49\n00:02:46.900 --> 00:02:48.900\na gente pega as\ninformações que a gente\n\n50\n00:02:48.900 --> 00:02:51.100\ntem comprimento de\numa circunferencia esse daqui.\n\n51\n00:02:52.400 --> 00:02:55.600\nGera o arquivo isso\né feito todos os dias\n\n52\n00:02:55.600 --> 00:02:59.700\ntanto para as informações\ndos usuários as ferramentas\n\n53\n00:02:59.700 --> 00:03:02.100\nquantos representantes olhar mais\npara frente a gente\n\n54\n00:03:02.100 --> 00:03:05.500\nvai entrar em vitamina\nB aos representantes toda\n\n55\n00:03:05.500 --> 00:03:07.700\nconta hoje pela conta.\nTem que ter um\n\n56\n00:03:07.700 --> 00:03:11.200\nrepresentante legal. Isso é\ninformado na plataforma e\n\n57\n00:03:11.200 --> 00:03:13.400\ntudo então assim de\numa calça hoje tem\n\n58\n00:03:13.400 --> 00:03:15.600\ntodas as informações para\npegar ele é muito\n\n59\n00:03:15.600 --> 00:03:20.600\nmedo e outras coisas\nsó tem essa de\n\n60\n00:03:20.600 --> 00:03:26.500\nrecebe armazena uma base\nno local na última\n\n61\n00:03:26.500 --> 00:03:31.500\nrodada, geralmente complementa a\ninformar para gerar arquivo,\n\n62\n00:03:31.500 --> 00:03:39.100\nbeleza bem simples bem\nque a gente vai\n\n63\n00:03:39.100 --> 00:03:42.800\nentrar no detalhe. Quais\nsão as contas você\n\n64\n00:03:42.800 --> 00:03:47.800\nvai ter um outro\noutro treinamento aí Geraldo\n\n65\n00:03:47.800 --> 00:03:51.100\narquivo, fica perto de\nface, ela envia arquivo.\n\n66\n00:03:52.400 --> 00:03:59.800\nS3 a gente tem um\nlambida, então isso tudo\n\n67\n00:03:59.800 --> 00:04:01.500\naqui repara que é\ntudo dentro desse trote\n\n68\n00:04:01.500 --> 00:04:04.000\nmarcha ainda hoje então\nque ela né, mas\n\n69\n00:04:04.000 --> 00:04:06.600\na gente tem aqui vai\npegar esse arquivo\n\n70\n00:04:06.600 --> 00:04:10.500\nS3 Mini vai jogar\nele tem uma máquina\n\n71\n00:04:10.500 --> 00:04:14.100\nec2 que a gente tem\ninstalado JD cabine\n\n72\n00:04:14.100 --> 00:04:17.500\nCCS então aqui vale\na gente mais JD\n\n73\n00:04:17.500 --> 00:04:19.700\nCabuçu sucesso, hoje, eu\ntô ligado ao sistema\n\n74\n00:04:19.700 --> 00:04:22.400\nque as palavras marcam\ndestrói. Nossa é o\n\n75\n00:04:22.400 --> 00:04:26.400\nsistema que os operadores\nacessam neve que tem\n\n76\n00:04:26.400 --> 00:04:30.400\neles acessam distalmente acessar\nesse sistema aí a\n\n77\n00:04:30.400 --> 00:04:33.000\ngente tem que colocar\no arquivo TXT lá\n\n78\n00:04:33.000 --> 00:04:36.300\ndentro de uma máquina\npasta específica que esse\n\n79\n00:04:36.300 --> 00:04:41.800\nsistema na cabine CCS.\nVai nele e vai\n\n80\n00:04:41.800 --> 00:04:44.400\ngerar o arquivo XML.\nE esse sim vai\n\n81\n00:04:44.400 --> 00:04:47.100\nser enviado ao banco\ncentral. Então é isso\n\n82\n00:04:47.100 --> 00:04:48.700\na gente tem lâmpada\nque pega o arquivo\n\n83\n00:04:48.700 --> 00:04:52.200\nTXT ouvir aquela\nparte específica dessa máquina.\n\n84\n00:04:52.300 --> 00:04:57.700\nOnde que o sistema\ncabine do sistema JB cabine\n\n85\n00:04:57.700 --> 00:05:01.200\nCCS vai nesse aqui\ntambém? É isso que\n\n86\n00:05:01.200 --> 00:05:02.800\neu tô falando é uma\nrotina também, eu\n\n87\n00:05:02.800 --> 00:05:06.400\nseja todo dia tem\numa rotina que pega\n\n88\n00:05:06.400 --> 00:05:10.600\nesse arquivo TXT chora\nna cabine a cabine\n\n89\n00:05:10.600 --> 00:05:13.200\nter uma rotina também\nque vai pegar esse\n\n90\n00:05:13.200 --> 00:05:16.000\naqui o teu XP vai\nfazer ligações necessárias\n\n91\n00:05:16.000 --> 00:05:19.800\nvai notificados nos casos\ngraves a casa tem\n\n92\n00:05:19.800 --> 00:05:24.000\nalguma assistência tem uma\noutra rotina que vai\n\n93\n00:05:24.000 --> 00:05:26.200\npegar esse arquivo e\nvai enviar 10 tela\n\n94\n00:05:26.200 --> 00:05:29.900\npelo sistema do Banco\nCentral não tá aí\n\n95\n00:05:29.900 --> 00:05:33.400\nsó a gente a cabine\ntem louco é\n\n96\n00:05:33.400 --> 00:05:34.700\nque tem um lado a\ngente também tem\n\n97\n00:05:34.700 --> 00:05:39.100\nacesso. Então vamos supor\nque teve alguma inconsistência\n\n98\n00:05:39.100 --> 00:05:42.300\na gente recebe um\ne-mail. E esse meio\n\n99\n00:05:42.300 --> 00:05:44.900\na gente acessa a\ncabine que acontece muito.\n\n100\n00:05:44.900 --> 00:05:47.500\nSei lá alguma conta\ntá com umas errado\n\n101\n00:05:47.500 --> 00:05:52.200\naquele nosso sentimento, mas\nera mais ficar aqui.\n\n102\n00:05:52.800 --> 00:05:56.800\nA gente utiliza esse\nfornecedor externo aqui para poder\n\n103\n00:05:56.800 --> 00:05:58.300\nfazer um envio ao\nBanco Central. A gente\n\n104\n00:05:58.300 --> 00:06:00.000\naté tinha opção de a\ngente fazer essa\n\n105\n00:06:00.000 --> 00:06:03.800\nligação comando central direto,\nmas não falei aquele\n\n106\n00:06:03.800 --> 00:06:06.200\nque a gente usou o\nterceiro para isso\n\n107\n00:06:06.200 --> 00:06:11.200\ndaqui aí aqui é o\nBanco Central. A\n\n108\n00:06:11.200 --> 00:06:15.400\ngente tem retorno do\nbanco central que fala,\n\n109\n00:06:15.400 --> 00:06:16.700\nné? Se foi com\nsucesso na hora daqui\n\n110\n00:06:16.700 --> 00:06:20.100\ntambém se tornou então\nassim é mais um\n\n111\n00:06:20.100 --> 00:06:22.100\nmotivo aí em cima e\npor que que\n\n112\n00:06:22.100 --> 00:06:23.600\na gente usou na\ncabine para isso não\n\n113\n00:06:23.600 --> 00:06:26.500\nainda tem que ser 10\nentão basicamente é\n\n114\n00:06:26.500 --> 00:06:30.000\nisso Pessoal. Esse aqui\nsão de Marte é\n\n115\n00:06:30.000 --> 00:06:31.500\nisso aqui ainda também\ntá dentro da hotmart,\n\n116\n00:06:31.500 --> 00:06:34.300\nmas ela a gente\nprecisa de um cisterna\n\n117\n00:06:34.300 --> 00:06:39.900\ndentro da Matemática aqui\na gente tem o\n\n118\n00:06:39.900 --> 00:06:42.700\ns t a que é o vale\ngás\n\n119\n00:06:42.700 --> 00:06:43.900\nque eu não coloquei\nmas eu acho que\n\n120\n00:06:43.900 --> 00:06:46.800\neu vou até colocar\npara solicitações de cabine\n\n121\n00:06:46.800 --> 00:06:50.000\nutiliza um banco mais\nKelly que é um\n\n122\n00:06:50.000 --> 00:06:52.200\nbanco, inclusive dentro da\nempresa vai te machucar\n\n123\n00:06:52.200 --> 00:06:52.700\nela precisa.\n\n124\n00:06:52.800 --> 00:06:58.100\nPara poder funcionar de\nfuncionar até que estão as\n\n125\n00:06:58.100 --> 00:06:59.900\ncontas e tudo, mas é\ntudo dentro de\n\n126\n00:06:59.900 --> 00:07:02.900\num colocar o que nós\nquer, a gente\n\n127\n00:07:02.900 --> 00:07:07.500\nutiliza trouxe, a gente\nvai voltar nessa pintura\n\n128\n00:07:07.500 --> 00:07:09.500\naté para poder ir no\nZap, nem vou\n\n129\n00:07:09.500 --> 00:07:12.000\ndeixar os treino código\ne tudo, mas é\n\n130\n00:07:12.000 --> 00:07:15.000\nque a gente só\nqueria realizar a mulher\n\n131\n00:07:15.000 --> 00:07:17.400\nde Isaque vocês um\npouquinho da prefeitura da\n\n132\n00:07:17.400 --> 00:07:20.600\nPenha abraço.\n\n";

const FIRST_LINE_INDEX = 0;
const SECOND_LINE_INDEX = 1;

const NUMERIC_INDEX_LINE_REGEX = new RegExp('^\\d{1,}$');
const WHITESPACE_LINE_REGEX = new RegExp('^\\s{1,}$');
const EMPTY_LINE_REGEX = new RegExp('^$');
const SUBTITLE_TIMESPAN_LINE_REGEX = new RegExp('.{1,}-->.{1,}')

function readVttFile(string) {
    let subtitlesArray = [];
    let raw_lines = string.split('\n');
    for(let i = 0; i < raw_lines.length; i++) {
        if(shouldAddLine(raw_lines[i], i)) {
            if(SUBTITLE_TIMESPAN_LINE_REGEX.test(raw_lines[i])) {
                subtitlesArray.push(buildSubtitleObject(raw_lines[i-1], raw_lines[i], raw_lines[i+1]));
            }
        }
    }
    return subtitlesArray
}

function shouldAddLine(line, index) {
    if(index == FIRST_LINE_INDEX || index == SECOND_LINE_INDEX || NUMERIC_INDEX_LINE_REGEX.test(line)|| WHITESPACE_LINE_REGEX.test(line) || EMPTY_LINE_REGEX.test(line)) {
        return false;
    }
    else {
        return true;
    }
}

function buildSubtitleObject(subtitleOrder, timespan, subtitle) {
    let subtitleObject = {
        "order" : subtitleOrder,
        "timespan" : timespan,
        "subtitle" : subtitle
    };

    return subtitleObject;
}

const subtitlesArray = readVttFile(STRING)

export { subtitlesArray }

